<!doctype html>
<html>
<head>
<meta charset="utf8">
<title>Phong Paste</title>
<style>
body{font-family:Arial;max-width:700px;margin:20px auto;}
textarea{width:100%;height:200px;padding:8px;box-sizing:border-box;}
button{padding:10px 16px;margin-top:8px;border:1px solid #444;background:#eee;cursor:pointer;}
#out{margin-top:12px;padding:10px;border:1px solid #ccc;word-break:break-word;}
</style>
</head>
<body>

<h2>Phong Paste</h2>

<textarea id="text"></textarea>
<button onclick="savePaste()">Lưu</button>

<div id="out"></div>

<script>
async function savePaste(){
    const token = "YOUR_TOKEN_HERE";  
    const user = "PhongYTB";
    const repo = "Napthe";

    const txt = document.getElementById("text").value;
    if(!txt.trim()){
        document.getElementById("out").innerHTML = "Không có nội dung";
        return;
    }

    const id = Math.random().toString(36).substring(2,10);

    const path = "posts/" + id + ".txt";

    const url = "https://api.github.com/repos/" + user + "/" + repo + "/contents/" + path;

    const body = {
        message: "New paste " + id,
        content: btoa(txt)
    };

    const res = await fetch(url,{
        method:"PUT",
        headers:{
            "Authorization":"Bearer " + token,
            "Content-Type":"application/json"
        },
        body:JSON.stringify(body)
    });

    if(res.status === 201){
        document.getElementById("out").innerHTML = 
        "Đã lưu. Link: https://raw.githubusercontent.com/" + user + "/" + repo + "/main/" + path;
    } else {
        document.getElementById("out").innerHTML = "Lỗi khi lưu";
    }
}
</script>

</body>
</html>
